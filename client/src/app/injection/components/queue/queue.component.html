<div class="queue">
    <div class="header">
        <span class="title">
            Queue
        </span>
        <span class="queue-status-container">
            <injection-status class="queue-status" [status]="queue.model.status"></injection-status>
        </span>
        <action-series [actions]="actions.list"></action-series>
    </div>
    <div class="body">
        <div class="empty-queue" *ngIf="model.injections.length === 0"

             fileUpload
             mode="multiple"
             allowedExtensions="docx"
             [browseOnClick]="false"
             (click)="createInjection()"
        >
            <span>Drop your templates here</span>
            <span>or</span>
            <span>Press to create injection</span>
        </div>
        <div class="queue-element" *ngFor="let injection of queue.injections">
            <div class="queue-element-dnd-handler enabled">
                <img ngSrc="assets/dnd-handler.svg" alt="D&D"
                     width="16" height="16"
                >
            </div>
            <div class="queue-element-body">
                <injection-status class="status" [status]="injection.model.status"></injection-status>
                <source-selector class="source-selector"
                                 [editable]="injection.model.status !== 'SUCCESS'"
                                 [source]="injection.model.dataSource">
                    <file-source
                        defaultName="Data"
                        title="Drop your data file here or select it by click"
                        allowedExtensions="json"
                        (uploadFile)="uploadData(injection.model.id, $event)"
                        (notEditableClick)="downloadSource(injection.model.dataSource.id)"
                    ></file-source>
                    <url-source></url-source>
                    <value-source></value-source>
                    <base64-source></base64-source>
                </source-selector>
                <source-selector class="source-selector"
                                 [editable]="injection.model.status !== 'SUCCESS'"
                                 [source]="injection.model.templateSource">
                    <file-source
                        defaultName="Template"
                        title="Drop your template file here or select it by click"
                        allowedExtensions="docx"
                        (uploadFile)="uploadTemplate(injection.model.id, $event)"
                        (notEditableClick)="downloadSource(injection.model.dataSource.id)"
                    ></file-source>
                    <url-source></url-source>
                    <base64-source></base64-source>
                </source-selector>
                <action-series [actions]="injection.actions.list"></action-series>
            </div>
        </div>
    </div>
</div>
